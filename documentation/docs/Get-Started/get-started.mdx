---
sidebar_position: 3
title: Get Started
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";


Create, update and delete Dyntrace configuration using Monaco. Gradual command-line guides will walk you through Monaco basics for the first time.

<Tabs
  defaultValue="introduction"
  values={[
    { label: "Introduction ", value: "introduction" },
    {label: "Create Configuration ",value: "create configuration"},
    {label: "Deploy Configuration ",value: "deploy configuration"},
    {label: "Delete Configuration ",value: "delete configuration"},
  ]}
>
  <TabItem value="introduction">

<Tabs
  defaultValue="monitoring as code"
  values={[
    { label: "Monitoring as Code with Monaco", value: "monitoring as code" },
    { label: "Install Monaco", value: "install monaco" },
  ]}
>

<TabItem value="monitoring as code">

The Monitoring as Code (MAC) approach enables you to manage your Dynatrace environment monitoring tasks through configuration files instead of a graphical user interface. 
Configuration files allow you to create, update, and manage your monitoring configurations safely, consistently, and repetitively. They can be reused, versioned, and shared within your team.

Monaco is an open source monitoring as code tool for Dynatrace. It lets you define Dynatrace configurations and settings in declarative files and manages these in your Dynatrace environment(s). Monaco has several advantages over manually managing your Dynatrace configurations in your environment(s):

<ul>
  <li>Monaco can manage your configuration accross multiple environments.</li>
  <li>You can commit your configuration to version control and collaborate on changes.</li>
  <li>Templatize your monitoring configuration for reusability.</li>
</ul>


## Manage any Dynatrace Configuration

Monaco interacts directly with the Dynatrace API. Multiple APIs are currently available in Monaco to automate your monitoring tasks. Adding new Dynatrace APIs into Monaco is also easy. Please refer to this [guide](https://github.com/dynatrace-oss/dynatrace-monitoring-as-code/blob/main/New_API.md).


## Standardize your deployment workflow

The way you rollout new configuration or manage and update existing configuration can be ordered and organized with the use of Monaco. The rollout strategy of these configurations can be integrated into your pipeline workflow:

<img
  src={require('./monaco-pipeline.png').default}
  alt="pipeline"
/>

</TabItem>

  <TabItem value="install monaco">

This guide will show you how to download Monaco and install it on your operating system (Linux/MacOS or Windows). 

** Note: this guide is for Monaco 0.2.0 . If you require another version, select the correct one from the drop-down menu above. **

1.	Go to the Monaco [release page](https://github.com/dynatrace-oss/dynatrace-monitoring-as-code/releases).
2.	Download the required version.
3.	Check that the Monaco binary is available on your PATH. This process will differ depending on your operating system. 

<Tabs
  defaultValue="operating system"
  values={[
    { label: "Operating System", value: "operating system" }
  ]}
>
  <TabItem value="operating system">

<Tabs
  defaultValue="linux-macos"
  values={[
    { label: "Linux / macOS", value: "linux-macos" },
    { label: "Windows", value: "windows" },
  ]}
>
  <TabItem value="linux-macos">

For Linux/MacOS, we recommend using `curl` (download it from [here](https://curl.se/) or use `wget`).

```shell
# Linux
# x64
$ curl -L https://github.com/dynatrace-oss/dynatrace-monitoring-as-code/releases/download/v2.0.0/monaco-linux-amd64 -o monaco

# x86
$ curl -L https://github.com/dynatrace-oss/dynatrace-monitoring-as-code/releases/download/v2.0.0/monaco-linux-386 -o monaco

# macOS
$ curl -L https://github.com/dynatrace-oss/dynatrace-monitoring-as-code/releases/download/v2.0.0/monaco-darwin-10.12-amd64 -o monaco
```

Make the binary executable:

```shell
$ chmod +x monaco
```

Optionally install monaco to a central location in your `PATH`.
This command assumes that the binary is currently in your downloads folder and that your PATH includes `/usr/local/bin`:

```shell
# use any path that suits you, this is just a standard example. Install sudo if needed.
$ sudo mv ~/Downloads/monaco /usr/local/bin/
```

## Verify Download

```shell
$ monaco
NAME:
   monaco - Automates the deployment of Dynatrace Monitoring Configuration to one or multiple Dynatrace environments.

USAGE:
   monaco [global options] command [command options] [arguments...]

Main commands:
   deploy    Create or update configuration
   convert   Transform monaco version 1 configuration to version 2 compatible configuration
   download  Download configuration from existing environments
   delete    Remove previously-created configuration

Global options:
   --help, -h  show help (default: false)
   --version   print the version (default: false)
```

  </TabItem>
  <TabItem value="windows">

Before you start, you need to set the PATH on Windows: 

1.	Go to Control Panel -> System -> System settings -> Environment Variables.
2.	Scroll down in system variables until you find PATH.
3.	Click edit and change accordingly.
4.	Include a semicolon at the end of the previous as that is the delimiter, i.e., c:\path;c:\path2
5.	Launch a new console for the settings to take effect.

Once your PATH is set, verify the installation by running `monaco` from your terminal. 

```shell
$ monaco
NAME:
   monaco - Automates the deployment of Dynatrace Monitoring Configuration to one or multiple Dynatrace environments.

USAGE:
   monaco [global options] command [command options] [arguments...]

Main commands:
   deploy    Create or update configuration
   convert   Transform monaco version 1 configuration to version 2 compatible configuration
   download  Download configuration from existing environments
   delete    Remove previously-created configuration

Global options:
   --help, -h  show help (default: false)
   --version   print the version (default: false)
```

  </TabItem>
</Tabs>
  </TabItem>
</Tabs>
  </TabItem>
</Tabs>
  </TabItem>


<TabItem value="create configuration">
With Monaco installed, you're ready to build your first monitoring configuration and have this deployed to your dynatrace environment. To do so, you'll create some configuration files to define what is to be applied to your environment.
<p> </p>

## Prerequisites

<ul>
  <li>Monaco (2.0.0+) installed.</li>
  <li>A dynatrace environment and access to create environment tokens.</li>
  <li>A dynatrace token with <code>Write entities (entities.write)</code> permission. </li>
</ul>

<p> </p>

## Write Configuration

In this tutorial, you'll create a tagging rule in an environment that will apply tags to hosts and services where Dynatrace server is detected.

Create a directory for your configuration:

```shell
$ mkdir learn-monaco-auto-tag
```

Change into the directory:
```shell
$ cd learn-monaco-auto-tag
```

Create a project directory to store the tagging configuration and change into the directory:
```shell
$ mkdir -p project-example/auto-tag; cd project-example/auto-tag
```

Create 2 files, the first file is to store the JSON configuration of the tagging configuration. The second file will be the [YAML configuration](../../configuration/yaml_configuration.md) file which lists the configurations to be deployed:
```shell
touch auto-tag.json auto-tag.yaml
```
<p></p>

Open `auto-tag.json` in your text editor, paste in the configuration below, then save the file


>**Tip** The name used in this configuration is specified as a variable and its value will be given in the YAML configuration

```json
{
    "name": "{{ .name }}",
    "rules": [
          {
                "type": "PROCESS_GROUP",
                "enabled": true,
                "valueFormat": null,
                "propagationTypes": [
                    "PROCESS_GROUP_TO_HOST",
                    "PROCESS_GROUP_TO_SERVICE"
                ],
                "conditions": [
                      {
                            "key": {
                                  "attribute": "PROCESS_GROUP_PREDEFINED_METADATA",
                                  "dynamicKey": "DYNATRACE_CLUSTER_ID",
                                  "type": "PROCESS_PREDEFINED_METADATA_KEY"
                            },
                            "comparisonInfo": {
                                  "type": "STRING",
                                  "operator": "BEGINS_WITH",
                                  "value": "Server on Cluster",
                                  "negate": false,
                                  "caseSensitive": true
                            }
                      }
                ]
          }
    ]
}
```

Next, Open `auto-tag.yaml` in your text editor, paste in the configuration below, then save the file

>**Tip** The value of name is now provided:

```yaml
configs:
  - id: application-tagging
    config:
      template: "auto-tag.json"
      name: "DTServer"
```

<p></p>

Change back into the `learn-monaco-auto-tag` folder:
```shell
cd ../..
```

Create a [deployment manifest file](../../configuration/configuration.md#deployment-manifest) to instruct Monaco what project to deploy and exactly where it should be deployed:
```shell
touch deploy.yaml
```

Open the `deploy.yaml` file in your text editor and past in the configuration below, and save the file:

<p></p>

> **Replace*** the **url value** with your dynatrace environment url

```yaml
projects:
  - name: auto-tag
    path: project-example

environments:
  - group: development
    entries:
      - name: development-environment
        url: "https://xxxxxx.live.dynatrace.com"
        token:
          name: "development-token"
```
<p></p>

## Export Token to your Environment Variables

Export your Dynatrace token to your environment.

> **Tip** Ensure your token has **Write Permissions**

```shell
$ export development-token=YourTokenValue
```

## Validate Configuration

Ensure your configuration is syntactically valid and consistent by using the `monaco deploy --dry-run` command.

Validate your configuration. The example configuration provided above is valid, so Monaco will return a message finished without errors.

```shell
$ monaco  deploy --dry-run deploy.yaml
2021/10/13 13:22:06 INFO  Dynatrace Monitoring as Code v2.0.0
2021/10/13 13:22:06 INFO  Processing environment `development-environment`...
2021/10/13 13:22:06 INFO  Deployment finished without errors

```

</TabItem>

<TabItem value="deploy configuration">

Apply the configuration to your environment now with the `monaco deploy` command. Monaco will print output as below:

```shell
$ monaco  deploy deploy.yaml
2021/10/13 14:48:43 INFO  Dynatrace Monitoring as Code v2.0.0
2021/10/13 14:48:43 INFO  Processing environment `development-environment`...
2021/10/13 14:48:43 INFO  Deployment finished without errors


```

>**Tip** If your configuration fails to deploy, you may have syntax errors in your files or your token requires more permissions. Please read any output errors

<p> Open your Dyntrace environment in your browser and:
<li>Go to Manage > Settings > Tags > Automatically Applied Tags</li>
<li>Search for <b>DTServer</b> </li>
<p></p>

<img
  src={require('./DTServer.png').default}
  alt="dtserver"
/>


</p>


</TabItem>

<TabItem value="delete configuration">
Once you no longer need your configuration(s), you may want to remove them completely to reduce maintenance tasks. For instance, you may want to remove configurations from a development environment. In addition to deploying configurations, Monaco can delete them.

<p> </p>

## Delete

The `monaco delete` command removes configurations in your Dynatrace environments. This command is the inverse of `monaco deploy` in that it removes configurations specified in your [delete configuration file](../../configuration/delete_configuration.md).

We will now delete the tag previously create `DTServer`.

From the root folder, create a file called `delete.yaml`

```shell
$ touch delete.yaml
```

Open the file in your text editor and paste in the following configuration, then save the file.

```yaml
delete:
  - "auto-tag/DTserver"
```

Delete the tag from your environment:

```shell
$ monaco_windows_no_debug.exe delete deploy.yaml delete.yaml
2021/10/13 18:21:33 INFO  Dynatrace Monitoring as Code v2.0.0

```
<p> </p>
As seen above, you'll need to provide the deployment manifest file and the delete file as arguments. The `delete` command requires the deployment manifest file in order to know the environment(s) to delete configurations from specified in the delete file.

</TabItem>

</Tabs>
